<div class="container-fluid">
	<div class="row bg-title">
		<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
			<h4 class="page-title">Manage App</h4>
		</div>
		<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
			<a target="_blank" href="{{discordUrl}}" class="btn btn-danger pull-right m-l-20 btn-rounded btn-outline hidden-xs hidden-sm waves-effect waves-light">Discord</a>
			<ol class="breadcrumb">
				<li><a ui-sref="dashboard.home" class="active">Home</a></li>
				<li class="active">Manage</li>
			</ol>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
			<div class="panel panel-inverse">
				<div class="panel-heading text-center">Terminal Logs</div>
				<div class="panel-wrapper">
					<div id="terminal">
						<div class="cmd" ng-repeat="x in appData.logs">
							<div ng-bind-html="x"></div>
						</div>
						<div class="cmd">&nbsp;</div>
					</div>
					<div class="form-group no-margin terminal_input">
						<div class="input-group">
							<div class="input-group-addon terminal_input--prompt">container:~/$</div>
							<input type="text" class="form-control terminal_input--input">
						</div>
					</div>
				</div>
			</div>
			<div class="panel panel-inverse">
				<div class="panel-heading text-center">Basic Control</div>
				<div class="panel-wrapper text-center">
					<div class="panel-body">
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="exec('restart')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-refresh fa-2x"></i></h3>
									<h3 class="text-danger">Restart</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="exec('stop')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-pause fa-2x"></i></h3>
									<h3 class="text-danger">Stop</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="exec('start')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-play fa-2x"></i></h3>
									<h3 class="text-danger">Start</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="exec('sftp')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-files-o fa-2x"></i></h3>
									<h3 class="text-danger">Files</h3>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
			<div class="panel panel-inverse">
				<div class="panel-heading text-center">Other</div>
				<div class="panel-wrapper text-center">
					<div class="panel-body">
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="openModal('delApp')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-close fa-2x"></i></h3>
									<h3 class="text-danger">Delete</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="openModal('setDns')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-globe fa-2x"></i></h3>
									<h3 class="text-danger">DNS</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="toast('Soon', 'We are working on it.', 'success')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-list fa-2x"></i></h3>
									<h3 class="text-danger">Activity</h3>
								</div>
							</a>
						</div>
						<div class="col-lg-3 col-md-3 col-sm-3 col-xs-12">
							<a href="javascript:void(0)" ng-click="toast('Soon', 'We are working on it.', 'success')">
								<div class="white-box">
									<h3 class="text-danger"><i class="fa fa-line-chart fa-2x"></i></h3>
									<h3 class="text-danger">Metrics</h3>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
			<div class="panel panel-inverse">
				<div class="panel-heading text-center">Server Info</div>
				<div class="panel-wrapper">
					<div class="panel-body">
						<table class="table table-borderless server-info">
							<tbody>
								<tr>
									<td>Domain: </td>
									<td>
										<a ng-if="appData.dns.custom" class="text-white" target="_blank" href="https://{{appData.dns.name}}">
											{{appData.dns.name}}
										</a><br ng-if="appData.dns.custom">
										<a class="text-white" target="_blank" href="https://{{appData.name+subDomain}}">
											{{appData.name+subDomain}}
										</a>
									</td>
								</tr>
								<tr>
									<td>Stack: </td>
									<td ng-bind="appData.image"></td>
								</tr>
								<tr>
									<td>Status: </td>
									<td class="{{appData.stats[appData.stats.length-1].ram==-1?'text-danger':'text-success'}}">
										<b ng-show="appData.stats.length">
											<i class="fa fa-circle"></i>&emsp;{{appData.stats[appData.stats.length-1].ram==-1?'STOPPED':'RUNNING'}}
										</b>
										<b ng-hide="appData.stats.length">Querying..</b>
									</td>
								</tr>
								<tr>
									<td>CPU: </td>
									<td>{{ appData.stats[appData.stats.length-1].cpu }}%</td>
								</tr>
								<tr>
									<td>RAM: </td>
									<td>{{ appData.stats[appData.stats.length-1].ram }}%</td>
								</tr>
								<tr>
									<td>ROM: </td>
									<td>{{ appData.stats[0].rom }}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div id="delApp" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header text-center">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h2 class="modal-title">Delete App</h2>
			</div>
			<div class="modal-body text-white">
				<form class="form-horizontal" name="delAppForm">
					<div class="form-group">
						<label>Enter <code>CONFIRM</code> to delete the application: *</label>
						<input type="text" class="form-control" ng-model="delAppForm.action" required>
						<span class="help-block">Input should be in capital.</span>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
				<button type="button" id="btnLoad" class="btn btn-danger waves-effect" ng-disabled="delAppForm.action != 'CONFIRM'"
				 data-loading-text="<i class='fa fa-spinner fa-spin '></i> Submitting" ng-click="exec('delete')">Delete</button>
			</div>
		</div>
	</div>
</div>
<div id="setDns" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header text-center">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h2 class="modal-title">Domain</h2>
			</div>
			<div class="modal-body text-white">
				<h3 ng-show="appData.dns.custom">Your DNS is already set.</h3>
				<form class="form-horizontal" name="setDnsForm" ng-show="!appData.dns.custom">
					<div class="form-group">
						<label>Enter domain: *</label>
						<input type="text" class="form-control" ng-model="setDnsForm.domain" required>
						<span class="help-block">Input should be in capital.</span>
					</div>
				</form>
				<table class="table table-hover margin bottom" ng-show="!setDnsForm.$invalid || appData.dns.custom">
					<thead>
						<tr>
							<th>Record Type</th>
							<th>Name</th>
							<th>Value</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><code>A</code></td>
							<td><code>{{ appData.dns.custom?appData.dns.name:setDnsForm.domain }}</code></td>
							<td><code>{{ hostIp }}</code></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
				<button type="button" id="btnLoad" class="btn btn-danger waves-effect" ng-disabled="setDnsForm.$invalid"
				 data-loading-text="<i class='fa fa-spinner fa-spin '></i> Submitting" ng-click="setDns(setDnsForm.domain)">Confirm</button>
			</div>
		</div>
	</div>
</div>
<div id="sftp" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header text-center">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h2 class="modal-title">Files</h2>
			</div>
			<div class="modal-body text-white">
				<a ui-sref="dashboard.fileManager({containerId: containerId})" target="_blank">
					<button type="button" class="btn btn-rounded btn-danger waves-effect pull-right">Web File Manager</button>
				</a>
				<br>
				<form class="form-horizontal">
					<div class="form-group">
						<label>Hostname</label>
						<input readonly class="form-control sftp" ng-value="sftpUrl">
					</div>
					<div class="form-group">
						<label>Port</label>
						<input readonly class="form-control sftp" value="22">
					</div>
					<div class="form-group">
						<label>Username</label>
						<input readonly class="form-control sftp" ng-value="appData._id">
					</div>
					<div class="form-group">
						<label>Password</label>
						<input readonly class="form-control sftp" ng-value="appData.sftp">
					</div>
				</form>
				<span class="help-block">The SFTP password is your account password. Ensure that your client is set to use SFTP and
					not FTP or FTPS for connections, there is a difference between the protocols.</span>
			</div>
			<div class="modal-footer">
				<button type="button" id="btnLoad" class="btn btn-danger waves-effect" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Submitting"
				 ng-click="exec('sftpReset')">Reset Pass</button>
				<button type="button" class="btn btn-default waves-effect" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>